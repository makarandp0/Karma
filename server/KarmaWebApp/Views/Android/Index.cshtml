@model KarmaWebApp.Models.MobileSessionModel

@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Karma Mobile!</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css" rel="stylesheet">
    <script type='text/javascript' src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type='text/javascript' src="http://netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script>
    <script type='text/javascript' src='/Scripts/knockout-3.0.0.js'></script>

    <!-- ticker-->    
    <script type='text/javascript' src='../../Scripts/app/textticker.js'></script>

    @if (Model.useMock)
    {
        <script type='text/javascript' src='../../Scripts/jquery.mockjax.js'></script>
        <script type='text/javascript' src='../../Scripts/app/mockdata.js'></script>

        <script>
            var username = "@Model.name";
            var userpic = "@Model.pictureUrl";
        </script>
    }
    
    <link rel="stylesheet" type="text/css" href="../../Content/app/appstyle.css">
    <script type='text/javascript' src='../../Scripts/app/appscript.js'></script>
    
<script>
    $(document).ready(function () {

        // setup textticker.
        applyTicker("textticker", [
            "a ride to airport this tuesday.     ",
            "to borrow some powertools for my weekend project.    ",
            "help feeding my cat for a day while I am gone.    ",
            "to borrow latest John Grisham book.   ",
            "help moving my stuff tommorrow.    "
        ]);

        $('[data-toggle=offcanvas]').click(function () {
            $('.row-offcanvas').toggleClass('active');
        });

        $('.btn-toggle').click(function () {
            $(this).find('.btn').toggleClass('active').toggleClass('btn-default').toggleClass('btn-primary');
        });

        SetupKnockOut(username, userpic);

    });
</script>
</head>

<body>

    <div class="page-container">
        <!-- top navbar -->
        <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="offcanvas" data-target=".sidebar-nav">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href=" #">KarmaWeb</a>
            </div>
        </div>
        <div class="col-sm-12">
            <div class="row row-offcanvas row-offcanvas-left">
                <!-- sidebar -->
                <div class="col-xs-4 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">
                    <div data-spy="affix" data-offset-top="45" data-offset-bottom="90" class="">
                        <ul class="nav" id="sidebar-nav">
                            <li> <a href="#you" class="">home</a> </li>
                            <li> <a href="#friends" class=""><span class="badge pull-right" data-bind="text: friends().length">0</span>friends</a> </li>
                            <li> <a href="#inbox" class=""><span class="badge pull-right" data-bind="text: inbox().length">0</span>inbox</a> </li>
                            <li> <a href="#outbox" class=""><span class="badge pull-right" data-bind="text: outbox().length">0</span>outbox</a> </li>
                            <li> <a href="#settings" class="">settings</a> </li>
                        </ul>
                    </div>
                </div>
                <!-- /sidebar -->
                <!-- main area -->
                <div class="col-xs-12 col-sm-9" data-spy="scroll" data-target="#sidebar-nav">

                    <!-- ask your friends for help pannel-->
                    <h1 id="you" class="">You</h1>
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <img data-bind="attr:{src: pictureUrl}">
                            <h4 class="">You got Friends <span data-bind="text: personName + '!'">!</span></h4>
                        </div>
                        <div class="panel-body">
                            Everybody needs help and friends love to help each other. Karmaweb makes exchanging favors easy! It will contact
                            your local
                            <strong>karma friends</strong> and find somebody who can help. Don't worry we hate spam too. We won't
                            post on facebook or send emails to your friends. Just type in what you need...
                            <!--<form class="form">-->
                            <div class="input-group text-center">
                                <span class="input-group-addon">I Need</span>
                                <input id="textticker" type="text" class="form-control input-lg" title="Don't worry. We hate spam, we wont post on facebook."
                                       placeholder="enter what you need..." data-bind="value: requestText">
                            </div>
                            <hr class="">

                            <div data-bind="visible: showRequestError">
                                <span class="label label-warning"> Are you kidding me...at least type sometime ?</span>
                            </div>
                            <button class="btn btn-lg btn-primary pull-right" data-bind="click: CreateRequest" type="button">Submit</button>
                            <!--</form>-->
                        </div>
                    </div>

                    <h1 id="friends" class="">friends</h1>
                    <div class="row">
                        <div class="col-sm-6">
                            <!-- Friends List -->
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <a href="#" class="pull-right">refresh</a>
                                    <h4 class="" data-bind="text: friendsPanelHeader">Friends List:</h4>
                                </div>
                                <div class="panel-body">
                                    <div class="list-group" data-bind="foreach: friends">
                                        <a href="#" class="friendinListContainer list-group-item" data-bind="css: { active: $parent.selectedfriend() == $data}, click: $parent.selectfriend.bind($parent)">
                                            <div style="float:left;padding-right:10px">
                                                <img style="float:left" class="img-polaroid" data-bind="attr:{src: pic}">
                                            </div>
                                            <h4 class="list-group-item-heading" data-bind="text: name"></h4>
                                            <p class="list-group-item-text">...</p>
                                        </a>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="col-sm-6">
                            <!-- Friends Details -->
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <a href="#" class="pull-right">View all</a>
                                    <h4 class="" data-bind="text: selectedfriend() ? selectedfriend().name : ''">Friends Details</h4>
                                </div>
                                <div class="panel-body">
                                    <p class="">
                                        <img class="img-polaroid pull-left" data-bind="attr:{src: selectedfriend() ? selectedfriend().pic : ''}">
                                    </p>
                                    <div class="clearfix"></div>
                                    <div class="realFriend" data-bind="visible: selectedfriend() ? !selectedfriend().blocked : false">
                                        <hr class="">
                                        if this person is not really a "friend", you can block him/her.
                                        Once Blocked this person will see any help requests from you and you will not
                                        see any requests from him. And don't worry we won't tell him/her that you
                                        blocked him.
                                        <hr class="">
                                        <div class="btn-group pull-right">
                                            <button class="btn btn-warning" data-bind="click: BlockSelectedFriend">Block this friend</button>
                                        </div>
                                    </div>
                                    <div class="blockedFriend" data-bind="visible: selectedfriend() ? selectedfriend().blocked : false">
                                        <hr class="">
                                        You have blocked this "friend". that means you will not see any help
                                        requests from him nor will he see your help requests. if you have changed your mind
                                        you can unblock him her anytime!
                                        <hr class="">
                                        <div class="btn-group pull-right">
                                            <button class="btn btn-success" data-bind="click: UnBlockSelectedFriend">UnBlock this friend</button>
                                        </div>
                                    </div>

                                </div>
                            </div>

                        </div>
                    </div>

                    <h1 id="inbox" class="">Inbox</h1>
                    <div class="row">
                        <!--Inbox-->
                        <div class="col-sm-6">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <a href="#" class="pull-right">Refresh</a>
                                    <h4 class="" data-bind="text: inboxPanelHeader">Inbox:</h4>
                                </div>
                                <div class="panel-body">
                                    <div class="list-group" data-bind="foreach: inbox">
                                        <a href="#" class="inboxListContainer list-group-item" data-bind="css: { active: $parent.selectedinbox() == $data}, click: $parent.selectInboxItem.bind($parent)">
                                            <div style="float:left;padding-right:10px">
                                                <img class="img-polaroid" data-bind="attr:{src: from.pic}">
                                            </div>
                                            <p class="list-group-item-text" data-bind="text: from.name">...</p>
                                            <h4 class="list-group-item-heading" data-bind="text: request.name"></h4>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div> <!--/Inbox-->

                        <div class="col-sm-6">
                            <!-- InboxDetails -->
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <a href="#" class="pull-right">View all</a>
                                    <h4 class="" data-bind="text: selectedinbox() ? selectedinbox().from.name : ''">Inbox Details</h4>
                                </div>
                                <div class="panel-body">
                                    <div style="float:left;padding-right:10px">
                                        <img class="img-polaroid pull-left" data-bind="attr:{src: selectedinbox() ? selectedinbox().from.pic : ''}">

                                    </div>
                                    <h4 class="list-group-item-heading" data-bind="text: selectedinbox() ? selectedinbox().request.name : ''"></h4>
                                    <div class="clearfix"></div>

                                    <hr class="">This is your chance to help your friend. if you choose to help, we will notify
                                    <span data-bind="text: selectedinbox() ? selectedinbox().from.name : ''">your friend</span> about
                                    it. if s/he hasn't gotten help already, he/she will accept your request and get back to you.
                                    if you choose to not help. its okay! We won't tell her that you saw the request.
                                    <div class="clearfix"></div>
                                    <hr class="">
                                    <span>
                                        <button type="button" class="btn btn-success btn-lg btn-block">Sure, I Can Help!</button>
                                        <button type="button" class="btn btn-default btn-lg btn-block">Sorry, Cant help this time</button>
                                    </span>
                                </div>
                            </div>
                        </div><!-- /InboxDetails -->

                    </div>

                    <!-- outbox -->
                    <h1 id="outbox" class="">outbox</h1>
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <a href="#" class="pull-right">Refresh</a>
                            <h4 class="">You Need:</h4>
                        </div>
                        <div class="panel-body">
                            <ul class="list-group">
                                <li class="list-group-item">
                                    <span class="btn-group btn-toggle pull-right">
                                        <button class="btn btn-xs btn-default">On</button>
                                        <button class="btn btn-xs btn-primary active">Off</button>
                                    </span> ride to airport on Monday
                                </li>
                                <li class="list-group-item">
                                    <span class="btn-group btn-toggle pull-right">
                                        <button class="btn btn-xs btn-default">On</button>
                                        <button class="btn btn-xs btn-primary active">Off</button>
                                    </span> somebody to feed my cat on saturday Morning
                                </li>
                            </ul>
                        </div>
                    </div>
                    <!-- /outbox -->

                    <h1 id="settings" class="">Settings</h1>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="alert alert-info alert-dismissable" style="display: none;">
                                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">├ù</button>
                                <strong class="">Heads up!</strong> This alert needs your attention,
                                but it's not super important.
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-6">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <a href="#" class="pull-right">View all</a>
                                    <h4 class="">Buttons &amp; Labels</h4>
                                </div>
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-xs-4">
                                            <a class="btn btn-default center-block" href="#">Button</a>
                                        </div>
                                        <div class="col-xs-4">
                                            <a class="btn btn-primary center-block" href="#">Primary</a>
                                        </div>
                                        <div class="col-xs-4">
                                            <a class="btn btn-danger center-block" href="#">Danger</a>
                                        </div>
                                    </div>
                                    <br class="">
                                    <div class="row">
                                        <div class="col-xs-4">
                                            <a class="btn btn-warning center-block" href="#">Warning</a>
                                        </div>
                                        <div class="col-xs-4">
                                            <a class="btn btn-info center-block" href="#">Info</a>
                                        </div>
                                        <div class="col-xs-4">
                                            <a class="btn btn-success center-block" href="#">Success</a>
                                        </div>
                                    </div>
                                    <hr class="">
                                    <div class="btn-group btn-group-sm">
                                        <button class="btn btn-default">1</button>
                                        <button class="btn btn-default">2</button>
                                        <button class="btn btn-default">3</button>
                                    </div>
                                    <hr class="">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <span class="label label-default">Label</span>
                                            <span class="label label-success">Success</span>
                                        </div>
                                        <div class="col-md-4">
                                            <span class="label label-warning">Warning</span>
                                            <span class="label label-info">Info</span>
                                        </div>
                                        <div class="col-md-4">
                                            <span class="label label-danger">Danger</span>
                                            <span class="label label-primary">Primary</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-6">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <a href="#" class="pull-right">View all</a>
                                    <h4 class="">Progress Bars</h4>
                                </div>
                                <div class="panel-body">
                                    <div class="progress">
                                        <div class="progress-bar progress-bar-info" style="width: 20%"></div>
                                    </div>
                                    <div class="progress">
                                        <div class="progress-bar progress-bar-success" style="width: 40%"></div>
                                    </div>
                                    <div class="progress">
                                        <div class="progress-bar progress-bar-warning" style="width: 80%"></div>
                                    </div>
                                    <div class="progress">
                                        <div class="progress-bar progress-bar-danger" style="width: 50%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-6">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <a href="#" class="pull-right">View all</a>
                                    <h4 class="">Tabs</h4>
                                </div>
                                <div class="panel-body">
                                    <ul class="nav nav-tabs">
                                        <li class="active">
                                            <a href="#A" data-toggle="tab" class="">Section 1</a>
                                        </li>
                                        <li>
                                            <a href="#B" data-toggle="tab" class="">Section 2</a>
                                        </li>
                                        <li>
                                            <a href="#C" data-toggle="tab" class="">Section 3</a>
                                        </li>
                                    </ul>
                                    <div class="tabbable">
                                        <div class="tab-content">
                                            <div class="tab-pane active" id="A">
                                                <div class="well well-sm">I'm in Section A.</div>
                                            </div>
                                            <div class="tab-pane" id="B">
                                                <div class="well well-sm">Howdy, I'm in Section B.</div>
                                            </div>
                                            <div class="tab-pane" id="C">
                                                <div class="well well-sm">I've decided that I like wells.</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--playground-->
                        <br class="">
                        <div class="clearfix"></div>
                        <hr class="">
                        <hr class="">
                    </div>
                    <!-- /.col-xs-12 main -->
                </div>
                <!-- /main area-->

            </div>
            <!--/.container-->
        </div>
        <!--/.page-container-->
    </div>
    <div id="push" class=""></div>

</body>
</html>
